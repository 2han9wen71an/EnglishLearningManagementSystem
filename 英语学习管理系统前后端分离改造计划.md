# 英语学习管理系统前后端分离改造计划

## 一、项目概述

将现有的英语学习管理系统从传统的Spring Boot + Thymeleaf架构改造为前后端分离架构，前端使用Vue3 + Element Plus，后端提供RESTful API服务。

## 二、改造阶段

### 阶段一：准备工作（1周）

#### 任务1.1：环境准备
- [ ] 安装Node.js和npm
- [ ] 学习Vue3基础知识
- [ ] 学习Element Plus组件库
- [ ] 熟悉RESTful API设计规范

#### 任务1.2：项目分析
- [ ] 分析现有项目结构
- [ ] 梳理业务功能和数据流
- [ ] 设计API接口文档
- [ ] 规划前端路由和组件结构

### 阶段二：后端改造（2周）

#### 任务2.1：基础配置（2天）
- [ ] 添加跨域支持（CORS配置）
- [ ] 添加统一响应格式
- [ ] 添加全局异常处理

#### 任务2.2：认证授权（3天）
- [ ] 添加JWT依赖
- [ ] 实现JWT工具类
- [ ] 实现认证过滤器
- [ ] 修改登录和注册接口

#### 任务2.3：控制器改造（9天）
- [ ] 改造用户相关控制器
- [ ] 改造单词学习相关控制器
- [ ] 改造听力练习相关控制器
- [ ] 改造阅读相关控制器
- [ ] 改造情景对话相关控制器
- [ ] 改造作文批改相关控制器
- [ ] 改造发音评测相关控制器
- [ ] 改造考试相关控制器
- [ ] 改造单词卡片相关控制器

### 阶段三：前端开发（4周）

#### 任务3.1：项目搭建（2天）
- [ ] 创建Vue3项目
- [ ] 安装Element Plus和其他依赖
- [ ] 配置路由和状态管理
- [ ] 配置API请求模块

#### 任务3.2：布局和公共组件（3天）
- [ ] 实现主布局组件
- [ ] 实现导航菜单组件
- [ ] 实现头部和底部组件
- [ ] 实现通用弹窗和表单组件

#### 任务3.3：用户相关页面（3天）
- [ ] 实现登录页面
- [ ] 实现注册页面
- [ ] 实现个人中心页面
- [ ] 实现用户信息编辑页面

#### 任务3.4：学习功能页面（12天）
- [ ] 实现主页
- [ ] 实现单词学习页面
- [ ] 实现听力练习页面
- [ ] 实现阅读页面
- [ ] 实现情景对话页面
- [ ] 实现作文批改页面
- [ ] 实现发音评测页面
- [ ] 实现考试页面
- [ ] 实现单词卡片页面

#### 任务3.5：管理员页面（8天）
- [ ] 实现管理员主页
- [ ] 实现用户管理页面
- [ ] 实现单词管理页面
- [ ] 实现听力管理页面
- [ ] 实现阅读管理页面
- [ ] 实现考试管理页面
- [ ] 实现公告管理页面
- [ ] 实现数据统计页面

### 阶段四：集成测试（1周）

#### 任务4.1：API测试（2天）
- [ ] 使用Postman测试所有API
- [ ] 修复API问题

#### 任务4.2：前端测试（3天）
- [ ] 测试所有前端页面功能
- [ ] 测试前端与后端的集成
- [ ] 修复前端问题

#### 任务4.3：兼容性测试（2天）
- [ ] 测试不同浏览器的兼容性
- [ ] 测试移动端适配
- [ ] 修复兼容性问题

### 阶段五：部署上线（1周）

#### 任务5.1：开发环境部署（2天）
- [ ] 配置后端开发环境
- [ ] 配置前端开发环境
- [ ] 测试开发环境

#### 任务5.2：生产环境部署（3天）
- [ ] 部署后端应用
- [ ] 构建前端静态文件
- [ ] 配置Nginx服务器
- [ ] 测试生产环境

#### 任务5.3：监控和维护（2天）
- [ ] 配置日志和监控
- [ ] 编写部署文档
- [ ] 培训使用人员

## 三、详细API设计

### 1. 用户相关API

#### 1.1 登录
- 请求方式：POST
- 请求路径：/api/login
- 请求参数：
  ```json
  {
    "email": "user@example.com",
    "password": "password"
  }
  ```
- 响应结果：
  ```json
  {
    "success": true,
    "message": "登录成功",
    "data": {
      "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
      "userId": 1,
      "userName": "用户名",
      "role": 0
    }
  }
  ```

#### 1.2 注册
- 请求方式：POST
- 请求路径：/api/register
- 请求参数：
  ```json
  {
    "userName": "用户名",
    "password": "password",
    "email": "user@example.com"
  }
  ```
- 响应结果：
  ```json
  {
    "success": true,
    "message": "注册成功，请前往邮箱激活",
    "data": null
  }
  ```

#### 1.3 获取用户信息
- 请求方式：GET
- 请求路径：/api/user/info
- 请求头：Authorization: Bearer {token}
- 响应结果：
  ```json
  {
    "success": true,
    "message": "获取成功",
    "data": {
      "userId": 1,
      "userName": "用户名",
      "email": "user@example.com",
      "role": 0
    }
  }
  ```

#### 1.4 更新用户信息
- 请求方式：PUT
- 请求路径：/api/user/info
- 请求头：Authorization: Bearer {token}
- 请求参数：
  ```json
  {
    "userName": "新用户名",
    "password": "新密码",
    "email": "newemail@example.com"
  }
  ```
- 响应结果：
  ```json
  {
    "success": true,
    "message": "更新成功",
    "data": null
  }
  ```

### 2. 单词学习API

#### 2.1 获取单词列表
- 请求方式：GET
- 请求路径：/api/words
- 请求参数：gradeId=1&page=1&size=10
- 响应结果：
  ```json
  {
    "success": true,
    "message": "获取成功",
    "data": {
      "total": 100,
      "list": [
        {
          "wordId": 1,
          "wordName": "apple",
          "explanation": "苹果",
          "audio": "[æpl]",
          "example": "I eat an apple every day."
        }
      ]
    }
  }
  ```

#### 2.2 获取单词详情
- 请求方式：GET
- 请求路径：/api/words/{wordId}
- 响应结果：
  ```json
  {
    "success": true,
    "message": "获取成功",
    "data": {
      "wordId": 1,
      "wordName": "apple",
      "explanation": "苹果",
      "audio": "[æpl]",
      "example": "I eat an apple every day."
    }
  }
  ```

#### 2.3 标记单词为已记住
- 请求方式：POST
- 请求路径：/api/words/{wordId}/remember
- 请求头：Authorization: Bearer {token}
- 响应结果：
  ```json
  {
    "success": true,
    "message": "标记成功",
    "data": null
  }
  ```

### 3. 作文批改API

#### 3.1 获取作文列表
- 请求方式：GET
- 请求路径：/api/essays
- 请求头：Authorization: Bearer {token}
- 响应结果：
  ```json
  {
    "success": true,
    "message": "获取成功",
    "data": [
      {
        "essayId": 1,
        "title": "My Hometown",
        "content": "...",
        "submitTime": "2025-05-01 10:00:00",
        "status": 0
      }
    ]
  }
  ```

#### 3.2 提交作文
- 请求方式：POST
- 请求路径：/api/essays
- 请求头：Authorization: Bearer {token}
- 请求参数：
  ```json
  {
    "title": "My Hometown",
    "content": "..."
  }
  ```
- 响应结果：
  ```json
  {
    "success": true,
    "message": "提交成功",
    "data": {
      "essayId": 1
    }
  }
  ```

#### 3.3 请求AI批改
- 请求方式：POST
- 请求路径：/api/essays/{essayId}/correct
- 请求头：Authorization: Bearer {token}
- 响应结果：
  ```json
  {
    "success": true,
    "message": "批改成功",
    "data": {
      "correctionId": 1,
      "grammarErrors": "[...]",
      "vocabularySuggestions": "[...]",
      "structureComments": "...",
      "overallScore": 85
    }
  }
  ```

### 4. 情景对话API

#### 4.1 获取对话场景列表
- 请求方式：GET
- 请求路径：/api/dialogues/scenarios
- 响应结果：
  ```json
  {
    "success": true,
    "message": "获取成功",
    "data": [
      {
        "scenarioId": 1,
        "scenarioName": "机场值机",
        "description": "...",
        "difficultyLevel": 1
      }
    ]
  }
  ```

#### 4.2 获取对话场景详情
- 请求方式：GET
- 请求路径：/api/dialogues/scenarios/{scenarioId}
- 响应结果：
  ```json
  {
    "success": true,
    "message": "获取成功",
    "data": {
      "scenarioId": 1,
      "scenarioName": "机场值机",
      "description": "...",
      "difficultyLevel": 1,
      "initialPrompt": "..."
    }
  }
  ```

#### 4.3 发送对话消息
- 请求方式：POST
- 请求路径：/api/dialogues/process
- 请求头：Authorization: Bearer {token}
- 请求参数：
  ```json
  {
    "scenarioId": 1,
    "userInput": "Hello, I'd like to check in for my flight."
  }
  ```
- 响应结果：
  ```json
  {
    "success": true,
    "message": "处理成功",
    "data": {
      "content": "Good morning! May I see your passport and booking confirmation, please?",
      "prompt": "现在你可以出示你的护照和预订确认信息。"
    }
  }
  ```

## 四、前端页面设计

### 1. 页面结构
- 登录/注册页面
- 主页
- 学习中心
  - 单词学习
  - 听力练习
  - 阅读
  - 情景对话
  - 作文批改
  - 发音评测
  - 考试
  - 单词卡片
- 个人中心
- 管理员后台

### 2. 组件设计
- 布局组件
  - 主布局
  - 侧边栏
  - 头部
  - 底部
- 功能组件
  - 单词卡片
  - 音频播放器
  - 对话框
  - 富文本编辑器
  - 录音组件
  - 考试题目组件

## 五、数据库调整

### 1. 新增表
- 无需新增表，使用现有数据库结构

### 2. 字段调整
- 无需调整字段，现有数据库结构满足需求

## 六、部署方案

### 1. 开发环境
- 后端：本地Spring Boot应用（8080端口）
- 前端：本地Vite开发服务器（3000端口）
- 数据库：本地MySQL

### 2. 生产环境
- 后端：部署Spring Boot应用到服务器
- 前端：构建静态文件并部署到Nginx
- 数据库：生产环境MySQL
- 配置Nginx反向代理处理API请求

## 七、风险与应对措施

### 1. 风险
- 学习成本高
- 改造工作量大
- 数据一致性问题
- 安全性问题

### 2. 应对措施
- 分阶段改造
- 保留部分旧代码
- 编写详细文档
- 自动化测试

## 八、后续优化计划

### 1. 性能优化
- 前端代码分割
- 懒加载
- 缓存策略

### 2. 功能优化
- 移动端适配
- 国际化支持
- 主题定制

### 3. 架构优化
- 微服务架构
- CI/CD流程
- 容器化部署
